<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人业务展示</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 0;
        }
        
        .profile-section, .business-section, .sales-section {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        h1, h2, h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }
        
        .profile-content {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            align-items: center;
        }
        
        .profile-img {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--light-color);
        }
        
        .profile-text {
            flex: 1;
            min-width: 300px;
        }
        
        .business-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .business-card {
            background: var(--light-color);
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid var(--secondary-color);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .business-card:hover {
            transform: translateY(-5px);
        }
        
        .business-card h3 {
            margin-top: 0;
        }
        
        .business-link {
            display: inline-block;
            margin-top: auto;
            padding: 0.5rem 1rem;
            background: var(--secondary-color);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            text-align: center;
            transition: background 0.3s;
        }
        
        .business-link:hover {
            background: #2980b9;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-top: 1.5rem;
        }
        
        .data-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        footer {
            background: var(--dark-color);
            color: white;
            text-align: center;
            padding: 1.5rem 0;
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            .profile-content {
                flex-direction: column;
                text-align: center;
            }
            
            .chart-container {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Johnson Internaional Commercial & Trade Co, Ltd</h1>
            <p class="tagline">Your Sourcing Agent From China, You Will Get Any You Want Made In China By There.</p>
            <p class="tagline">你的采购经理，在这里你能得到你想得到的一切。</p>
        </div>
    </header>

    <div class="container">
        <section class="profile-section">
            <h2>个人简介</h2>
            <div class="profile-content">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&h=200&q=80" alt="张明" class="profile-img">
                <div class="profile-text">
                    <p>我是一名专业的数据分析师和业务顾问，拥有8年行业经验，专注于帮助企业通过数据驱动决策实现业务增长。</p>
                    <p>擅长使用Python、R、SQL等工具进行数据挖掘和分析，曾为多家知名企业提供数据解决方案，帮助客户提升30%以上的业务效率。</p>
                    <p>在GitHub上，我分享数据分析项目和技术博客，致力于构建开源数据分析工具社区。</p>
                </div>
            </div>
        </section>

        <section class="business-section">
            <h2>主营业务</h2>
            <div class="business-items">
                <div class="business-card">
                    <h3>数据可视化咨询</h3>
                    <p>为企业提供定制化数据可视化解决方案，将复杂数据转化为直观图表和仪表盘，帮助决策者快速理解业务趋势和关键指标。</p>
                    <a href="data-visualization.html" class="business-link">了解详情</a>
                </div>
                <div class="business-card">
                    <h3>业务分析报告</h3>
                    <p>基于多维度数据分析，生成深度业务洞察报告，涵盖市场趋势、用户行为、产品表现等方面，助力企业战略决策。</p>
                    <a href="business-analysis.html" class="business-link">了解详情</a>
                </div>
                <div class="business-card">
                    <h3>数据分析培训</h3>
                    <p>提供数据分析技能培训，从基础统计到高级机器学习，帮助企业团队提升数据素养和数据分析能力。</p>
                    <a href="data-training.html" class="business-link">了解详情</a>
                </div>
            </div>
        </section>

        <section class="sales-section">
            <h2>月度销售数据</h2>
            <p>以下图表动态展示最近12个月的销售数据，数据直接从同一仓库的CSV文件读取。</p>
            
            <div class="data-controls">
                <button id="refreshBtn">刷新数据</button>
                <button id="toggleView">切换视图</button>
                <span id="dataStatus" style="margin-left: auto; padding: 0.5rem; color: #666;"></span>
            </div>
            
            <div class="chart-container">
                <canvas id="salesChart"></canvas>
            </div>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>© 2025 张明 - 个人业务展示 | 数据更新于: <span id="updateTime"></span></p>
        </div>
    </footer>

    <script>
        // 在同一仓库中的CSV文件路径（相对于HTML文件的位置）
        const CSV_PATH = 'sales.csv';
        
        let salesChart;
        let isBarChart = true;
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadSalesData();
            document.getElementById('refreshBtn').addEventListener('click', loadSalesData);
            document.getElementById('toggleView').addEventListener('click', toggleChartView);
            document.getElementById('updateTime').textContent = new Date().toLocaleString();
        });
        
        // 从同一仓库加载CSV数据
        async function loadSalesData() {
            try {
                updateStatus('正在加载数据...', 'info');
                
                // 使用相对路径获取CSV文件
                const response = await fetch(CSV_PATH);
                if (!response.ok) {
                    throw new Error(`无法加载CSV文件: ${response.status} ${response.statusText}`);
                }
                
                const csvText = await response.text();
                const parsedData = parseCSV(csvText);
                
                updateChart(parsedData);
                document.getElementById('updateTime').textContent = new Date().toLocaleString();
                updateStatus('数据加载成功', 'success');
            } catch (error) {
                console.error('加载数据失败:', error);
                updateStatus('数据加载失败: ' + error.message, 'error');
                
                // 如果加载失败，使用示例数据
                useSampleData();
            }
        }
        
        // 解析CSV数据
        function parseCSV(csvText) {
            const lines = csvText.split('\n').filter(line => line.trim() !== '');
            const headers = lines[0].split(',').map(header => header.trim());
            
            const data = {
                labels: [],
                revenues: [],
                profits: []
            };
            
            // 从第二行开始是数据行（假设第一行是标题）
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',').map(value => value.trim());
                
                // 假设CSV格式为: 月份,收入,利润
                if (values.length >= 3) {
                    data.labels.push(values[0]);
                    data.revenues.push(parseFloat(values[1]));
                    data.profits.push(parseFloat(values[2]));
                }
            }
            
            return data;
        }
        
        // 使用示例数据（当CSV文件加载失败时）
        function useSampleData() {
            const sampleData = {
                labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                revenues: [120, 135, 110, 150, 165, 140, 155, 170, 160, 180, 175, 190],
                profits: [45, 52, 40, 60, 68, 55, 62, 70, 65, 75, 72, 80]
            };
            
            updateChart(sampleData);
            document.getElementById('updateTime').textContent = new Date().toLocaleString();
            updateStatus('使用示例数据（CSV文件未找到）', 'warning');
        }
        
        // 更新图表
        function updateChart(data) {
            const ctx = document.getElementById('salesChart').getContext('2d');
            
            // 如果已存在图表实例，先销毁
            if (salesChart) {
                salesChart.destroy();
            }
            
            // 创建新图表
            salesChart = new Chart(ctx, {
                type: isBarChart ? 'bar' : 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: '月收入 (万元)',
                            data: data.revenues,
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 2
                        },
                        {
                            label: '月利润 (万元)',
                            data: data.profits,
                            backgroundColor: 'rgba(46, 204, 113, 0.7)',
                            borderColor: 'rgba(46, 204, 113, 1)',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '金额 (万元)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '月份'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '月度销售数据趋势',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }
        
        // 切换图表视图
        function toggleChartView() {
            isBarChart = !isBarChart;
            loadSalesData(); // 重新加载数据以更新图表类型
        }
        
        // 更新状态信息
        function updateStatus(message, type) {
            const statusEl = document.getElementById('dataStatus');
            statusEl.textContent = message;
            
            // 根据类型设置颜色
            if (type === 'success') {
                statusEl.style.color = '#27ae60';
            } else if (type === 'error') {
                statusEl.style.color = '#e74c3c';
            } else if (type === 'warning') {
                statusEl.style.color = '#f39c12';
            } else {
                statusEl.style.color = '#3498db';
            }
        }
    </script>
</body>
</html>
